
// Minimal stub for client search index â€” not the full elasticlunr implementation.
window.SimpleSearch = (function(){
  function normalize(s){return (s||"").toLowerCase()}
  function tokenize(s){return normalize(s).split(/[^\p{L}\p{N}]+/u).filter(Boolean)}
  return {
    build: function(docs){
      const idx = new Map();
      for(const doc of docs){
        const tokens = new Set(tokenize((doc.title||"") + " " + (doc.content||"") + " " + ((doc.tags||[]).join(" "))));
        tokens.forEach(t=>{
          if(!idx.has(t)) idx.set(t, []);
          idx.get(t).push(doc);
        });
      }
      return {
        search(q){
          if(!q) return [];
          const tokens = tokenize(q);
          let result = new Set();
          for(const t of tokens){
            const arr = idx.get(t)||[];
            for(const d of arr) result.add(d);
          }
          return Array.from(result).slice(0, 30);
        }
      }
    }
  }
})();
